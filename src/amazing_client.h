/*
 * amazing_client.h
 *
 */
#ifndef AMAZING_CLIENT_H
#define AMAZING_CLIENT_H

#include "amazing.h"

typedef struct Move {
    XYPos pos;
    char direction;
    char attemptedDirection;
} Move;

typedef struct AM_Args {
    int avatarId;       // integer generated by AMStartup for each avatar
    int nAvatars;       // total number of avatars
    int difficulty;     // difficulty of tha maze
    char *ipAddress;    // IP address of the server
    uint32_t mazePort;  // MazePort returned in AM_INIT_OK
    uint32_t width;     // maze width
    uint32_t height;    // maze height
    char ***walls;
    Move *lastMoves;
    char *logfile;      // filename to append to
} AM_Args;

void *new_amazing_client(void *args);

void freeAMArgs(AM_Args *args);

int addTwoSidedWall(char ***walls, Move *lastMoves,
                    uint32_t prevTurn, uint32_t width, uint32_t height);

int addOneSidedWall(char ***walls, uint32_t x, uint32_t y,
                    char direction, uint32_t width, uint32_t height);

int string_contains(char value, char *array, int size);

void draw(char ***walls, Move *lastMoves, XYPos *newPositions, uint32_t prevTurn, uint32_t width, uint32_t height, uint32_t nAvatars);

int generateMove(char ***walls, Move *lastMoves, uint32_t turnId);

uint32_t directionToAmazingDirection(char direction);

char directionDiff(int from_x, int from_y, int to_x, int to_y);

int avatarAtLocation(int avatarId,
                     XYPos *positions, int x, int y);

#endif // AMAZING_CLIENT_H

